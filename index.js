(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{createPlayoffs:()=>B});const n=(t,e)=>{console.error(`Incorrect data. %c ${t} %c${e?JSON.stringify(e,null,2):""}`,"color: #9d7575","font-size: 10px; color: #9d7575")},i=t=>{if(!t.length)return{have_errors:!1,have_critical_error:!1};const e=t.find((t=>t.is_critical));return e?(n(e.message,e.data),{have_errors:!0,have_critical_error:!0}):(n(t[0].message,t[0].data),{have_errors:!0,have_critical_error:!1})},a=(t,e=300)=>{let n;return(...i)=>{clearTimeout(n),n=setTimeout((()=>{t.apply(void 0,i)}),e)}},o=t=>"object"==typeof t&&!Array.isArray(t)&&null!==t,r=t=>{const e=document.createElement("div");return e.innerHTML=t.trim(),e.firstElementChild},s=(t,e,n)=>{const i=document.head.querySelector(`#${t}-${e}`);i&&document.head.removeChild(i),((t,e,n)=>{document.head.insertAdjacentHTML("beforeend",`<style id='${t}-${e}'>${n}</style>`)})(t,e,n)},l=t=>{if(null===t||"object"!=typeof t)return t;let e=new t.constructor;for(let n in t)t.hasOwnProperty(n)&&(e[n]=l(t[n]));return e},d=(t,e)=>{const n=[];return void 0===t?n.push({is_critical:!0,message:"data.matches must be provided and it must be an array"}):Array.isArray(t)||n.push({is_critical:!0,message:"data.matches must be an array, instead got",data:t}),t&&t.length&&t.forEach((t=>{o(t)||n.push({is_critical:!0,message:"Expected a match object, instead got",data:t}),void 0===t.match_id&&n.push({is_critical:!1,message:"Match must contain .match_id property",data:t}),void 0===t.round_id&&n.push({is_critical:!1,message:"Match must contain .round_id property",data:t}),void 0===t.order&&n.push({is_critical:!1,message:"Match must contain .order property",data:t}),"number"!=typeof t.order&&n.push({is_critical:!1,message:"Match.order property is required, and it must be a number",data:t}),Array.isArray(t.sides)?t.sides.forEach((i=>{o(i)||n.push({is_critical:!0,message:"Match's side must be an object",data:t}),"string"!=typeof i.contestant_id&&n.push({is_critical:!1,message:"Side.contestant_id is required and must be a string",data:i}),Object.keys(e).includes(i.contestant_id)||n.push({is_critical:!1,message:"No contestant data found for this side.contestant_id",data:i}),void 0!==i.is_winner&&"boolean"!=typeof i.is_winner&&n.push({is_critical:!1,message:"If you provide side.is_winner, it must be a boolean",data:i}),void 0===i.score||Array.isArray(i.score)||n.push({is_critical:!1,message:"If side.score is provided, it must be an array",data:i}),Array.isArray(i.score)&&i.score.forEach((t=>{o(t)||n.push({is_critical:!1,message:"Score must be an object",data:i}),void 0===t.main_score&&n.push({is_critical:!1,message:'If you provide a side.score, it must contain a "main_score" property',data:i}),"number"!=typeof t.main_score&&"string"!=typeof t.main_score&&n.push({is_critical:!1,message:"Side.score.main_score must be a number or a string",data:i}),"number"!=typeof t.tie_break&&void 0!==t.tie_break&&n.push({is_critical:!1,message:"If you provide side.score.tie_break, it must be a number",data:i}),"boolean"!=typeof t.is_winner&&void 0!==t.is_winner&&n.push({is_critical:!1,message:"If you provide side.score.is_winner, it must be a boolean",data:i})})),void 0!==i.subscore&&"number"!=typeof i.subscore&&"string"!=typeof i.subscore&&n.push({is_critical:!1,message:"If side.subscore is provided, it must be a number or a string",data:i}),void 0!==i.is_serving&&"boolean"!=typeof i.is_serving&&n.push({is_critical:!1,message:"If side.is_serving is provided, it must be a boolean",data:i})})):n.push({is_critical:!0,message:"Match.sides is required and must be an array",data:t})})),n},c=(t,e)=>e===t-1?"Final":e===t-2?"Semifinals":e===t-3?"Quarterfinals":`1/${Math.pow(2,t-e-1)}`,h=t=>{const e=document.querySelector(`#${t}`);if(!e)return null;const n=t=>e.querySelector(t);return{the_root_element:e,scrollbar:n(".scrollbar"),content_area:n(".content-area"),round_titles_wrapper:n(".round-titles-wrapper"),matches_vertical_scroller:n(".matches-vertical-scroller"),matches_positioner:n(".matches-positioner")}},p="#bbbbbb",u={overMatches:"left and right (on top of matches)",gutters:"left and right (in the gutters)",beforeTitles:"header (before round titles)",overTitles:"header (on top of round titles)",hidden:"hidden"},g=({scrollbar:t,matches_vertical_scroller:e})=>{if("none"===getComputedStyle(t).display)return;t.style.top=e.scrollTop/e.scrollHeight*100+"%",t.style.height=e.clientHeight/e.scrollHeight*100+"%";const n=e.scrollHeight>e.clientHeight;t.style.visibility=n?"visible":"hidden"},m=(t,e)=>{[...t.querySelectorAll(".match-wrapper")].forEach((t=>{t.classList.remove("highlighted","last-highlighted"),[...t.querySelectorAll(".side-wrapper")].forEach((n=>{n.classList.remove("highlighted"),null!==e&&n.getAttribute("contestant-id")===e&&(n.classList.add("highlighted"),t.classList.add("highlighted"))}))})),[...t.querySelectorAll(".match-wrapper.highlighted")].reverse()[0]?.classList.add("last-highlighted")},v=(t,e,n,i)=>{let o=null,r=null,s=!1;const{the_root_element:l,content_area:d,matches_vertical_scroller:c,scrollbar:h,matches_positioner:p}=n;l.addEventListener("mouseup",(n=>{if(!s&&0===n.button)if(n.target.classList.contains("navigation-button"))i.handle_click(n);else if(null===e("onMatchClick")){if(null===e("onMatchSideClick"))n.target.classList.contains("side-wrapper")?m(p,n.target.closest(".side-wrapper").getAttribute("contestant-id")):m(p,null);else if(n.target.classList.contains("side-wrapper")){const i=n.target.closest(".match-wrapper")?.getAttribute("match-id"),a=t.matches.find((t=>t.match_id===i)),o=n.target.getAttribute("contestant-id"),r=t.contestants[o];e("onMatchSideClick")(r,o,a)}}else if(n.target.classList.contains("match-body")){const i=n.target.closest(".match-wrapper")?.getAttribute("match-id");e("onMatchClick")(t.matches.find((t=>t.match_id===i)))}})),h.addEventListener("mousedown",(t=>{0===t.button&&(s=!0,o=t.clientY,r=c.scrollTop,h.classList.add("dragged"))})),window.addEventListener("mouseup",(t=>{s=!1,o=null,r=null,h.classList.remove("dragged")})),window.addEventListener("mousemove",((t,e)=>{let n=!1;return(...e)=>{n||(t.apply(void 0,e),n=!0,setTimeout((()=>{n=!1}),15))}})((t=>{if(s){const e=(t.clientY-o)/d.clientHeight;c.scrollTop=r+e*c.scrollHeight}})));const u=a((()=>{c.style.overflowY="scroll"}),200);window.addEventListener("scroll",(()=>{c.style.overflowY="hidden",u()})),c.addEventListener("scroll",(()=>g(n)))},f={GENERAL_OPTIONS:{mainBorderColor:{title:"Main border color",type:"string",default_value:p},rootBackgroundColor:{title:"Root background color",type:"string",default_value:"#ffffff"},mainVerticalPadding:{title:"Main vertical padding (before first match and after last match)",type:"pixels",default_value:20,min_value:0},visibleRoundsCount:{title:"How many rounds to display (0 for 'auto', i.e. as much as possible)",type:"number",default_value:0},showScrollbar:{title:"Should show scrollbar",type:"boolean",default_value:!0},scrollbarWidth:{title:"Scrollbar width",type:"pixels",default_value:"5"},scrollbarColor:{title:"Scrollbar color",type:"string",default_value:"#d3d3d3"}},ROUND_TITLE_OPTIONS:{roundTitlesHeight:{title:"Round titles height",type:"pixels",default_value:"50"},roundTitlesBorderBottomColor:{title:"Round titles bottom border-color",type:"string",default_value:p},roundTitleColor:{title:"Round title color",type:"string",default_value:"#000"}},NAVIGATION_OPTIONS:{navButtonsPosition:{title:"Navigation (switch rounds) buttons position",type:"select",options:[...Object.keys(u)],default_value:"gutters",explanation:Object.entries(u).map((([t,e])=>`<span style="text-decoration: underline;">${t}</span>: ${e}`)).join("<br />")},navigationButtonsTopDistance:{title:"Navigation buttons distance from content top, in any units",type:"string",default_value:"50%",disable_if:t=>"overMatches"!==t.navButtonsPosition,explanation:"navigationButtonsTopDistance option takes effect only when navButtonsPosition is set to 'overMatches'"},navigationGutterBorderColor:{title:"Navigation gutter border color",type:"string",default_value:p,disable_if:t=>"gutters"!==t.navButtonsPosition&&"overTitles"!==t.navButtonsPosition&&"beforeTitles"!==t.navButtonsPosition,explanation:"navigationGutterBorderColor options is applied only when navButtonsPosition is 'gutters' or 'overTitles' or 'beforeTitles'"},defaultNavigationSvgSize:{title:"Default navigation arrow size",type:"pixels",default_value:"50"},navigationSvgColor:{title:"Navigation buttons svg color",type:"string",default_value:"#161616"},leftNavigationButtonBackground:{title:"Left navigation button background",type:"string",default_value:"transparent",explanation:"leftNavigationButtonBackground options is applied if navButtonsPosition is 'gutters' or 'overMatches'"},rightNavigationButtonBackground:{title:"Right navigation button background",type:"string",default_value:"transparent",explanation:"rightNavigationButtonBackground options is applied if navButtonsPosition is 'gutters' or 'overMatches'"},leftNavigationButtonHTML:{title:"Inner HTML of LEFT navigation button (<svg> / <img> / whatever)",type:"multiline_string",default_value:'\n            <svg class="default-navigation-svg" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M16.67 0l2.83 2.829-9.339 9.175 9.339 9.167-2.83 2.829-12.17-11.996z"/></svg>\n        '},rightNavigationButtonHTML:{title:"Inner HTML of RIGHT navigation button (<svg> / <img> / whatever)",type:"multiline_string",default_value:'\n            <svg class="default-navigation-svg" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"/></svg>\n        '}},FONTS_OPTIONS:{rootFontFamily:{title:'Root font-family (applied to blocks with an "inherit" font-family)',type:"string",default_value:"Open Sans, Roboto, sans-serif"},roundTitlesFontFamily:{title:"Round titles font-family",type:"string",default_value:"inherit"},roundTitlesFontSize:{title:"Round titles font-size",type:"pixels",default_value:30,min_value:8},matchTextColor:{title:"Match text color",type:"string",default_value:"#000"},matchFontSize:{title:"Match font-size",type:"pixels",default_value:16,min_value:8},playerTitleFontFamily:{title:"Player title font family",type:"string",default_value:"inherit"},highlightedPlayerTitleColor:{title:"Highlighted player title color",type:"string",default_value:"#003ae6",explanation:"This color is applied to a players' titles when\n            <br />\n            1) contestant is under cursor\n            <br />\n            2) contestant's match history is highlighted"},scoreFontFamily:{title:'Score font-family (provide "inherit" to use rootFontFamily option)',type:"string",default_value:"inherit"}},CONNECTION_LINES_OPTIONS:{connectionLinesWidth:{title:"Connection lines width",type:"pixels",default_value:2,min_value:0},connectionLinesColor:{title:"Connection lines color",type:"string",default_value:"#dcdcdc"},highlightedConnectionLinesColor:{title:"Highlighted connection lines color",type:"string",default_value:"#7698ff"}},MATCH_OPTIONS:{matchMaxWidth:{title:"Max match width",type:"pixels",default_value:450,explanation:"Specifying smaller width here will help easy-playoffs draw a greater number of rounds within a given width"},matchMinVerticalGap:{title:"Minimal vertical distance between matches",type:"pixels",default_value:25,explanation:"Minimal distance means a distance between matches of the leftmost visible round when the visible height isn't enough to contain all matches of this round"},matchHorMargin:{title:"Matches' horizontal margins",type:"pixels",default_value:"20",explanation:'Note that in "mobile" (1-round) layout this option will take no effect. Instead a margin of 1.5% will be used'},matchAxisMargin:{title:"Vertical distance between match axis and each side of a match",type:"pixels",default_value:4},oneSidePlayersGap:{title:"Vertical distance between players of one side of a match (e.g. of tennis doubles)",type:"pixels",default_value:2},liveMatchBorderColor:{title:"Live match border color",type:"string",default_value:"#44c985"},liveMatchBackgroundColor:{title:"Live match background color",type:"string",default_value:"transparent"},distanceBetweenScorePairs:{title:"Distance between scores (e.g. between sets in tennis)",type:"pixels",default_value:14,min_value:0}},CALLBACKS:{onMatchClick:{title:"What happens when a user clicks on a match (JS function)",type:"function_or_null",default_value:null,explanation:"\n            Your function will be called with a data of a match that was clicked.\n            <br /><br />\n            Example:\n            <div class=\"code\">{\n    onMatchClick: (match) => {\n        location.href = `/matches/${match.match_id}`\n    }\n}\n</div>\n<br />\nIf you provide this function, contestant's match history will not be highlighted when you click a match's side"},onMatchSideClick:{title:"What happens when a user clicks on a side of a match (JS function)",type:"function_or_null",default_value:null,explanation:"\n            Your function will be called with\n            <br />\n            1) data of a contestant which was clicked,\n            <br />\n            2) this contestant's id,\n            <br />\n            3) data of a match within which a side was clicked\n            <br />\n            <br />\n            Example:\n            <div class=\"code\">{\n    onMatchSideClick: (contestant, contestant_id, match) => {\n        location.href = `/teams/${contestant_id}`\n    }\n}\n</div>\n            <br />\n            <br />\n            If you provide this function, it will discard the default behaviour: contestant's match history will not be highlighted when you click a match's side"}}},b=()=>{const t={};return Object.values(f).forEach((e=>Object.assign(t,e))),t};let y=!1;const _=(t,e)=>{requestAnimationFrame((()=>{y||(y=!0,console.warn(`Impossible value %c${JSON.stringify(e,null,2)}%c provided for ${t} option. Default value of %c${(()=>{const t={};return Object.entries(b()).forEach((([e,{default_value:n}])=>{t[e]=n})),t})()[t]}%c will be used instead`,"background: pink","","background: #c7ffc9",""))}))},w=[];function $(){w.includes(this.src)||w.push(this.src),this.removeEventListener("error",$),this.removeEventListener("load",x),this.remove()}function x(){this.removeEventListener("error",$),this.removeEventListener("load",x)}const k=(t,e,n)=>{let i="",a=n.contestants[t.contestant_id];return a?(n.have_entry_statuses&&(i+=`<div class="side-info-item entry-status">${a.entry_status||""}</div>`),i+=`<div class="side-info-item players-info">\n        ${a.players.map((t=>((t,e)=>`<div class="player-wrapper">\n    ${((t,e)=>{if(!e.have_nationalities)return"";let n="";return t.nationality_code&&(n=t.nationality_code),t.flag_url&&![...w].includes(t.flag_url)&&(n=`<img class="player-flag" src="${t.flag_url}" loading=lazy />`),`<div class="nationality">${n}</div>`})(t,e)}\n    <div class="player-title">${t.title}</div>\n</div>`)(t,n))).join("")}\n    </div>`,t.is_winner&&(i+='<div class="side-info-item winner-mark">\n            <svg class="default-winner-svg" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path xmlns="http://www.w3.org/2000/svg" d="M21 6.285l-11.16 12.733-6.84-6.018 1.319-1.49 5.341 4.686 9.865-11.196 1.475 1.285z"/></svg>\n        </div>'),Array.isArray(t.score)&&(i+=`<div class="side-info-item score">\n            ${t.score.map(((n,i)=>{let a=n.is_winner;return void 0===a&&(a=!!t.is_winner),`<div class="single-score ${a?"winner":""}">\n                    <div class="side-own-score">\n                        <span class="main-score">${n.main_score}</span>\n                        ${"number"==typeof n.tie_break?`<span class="tie-break">${n.tie_break}</span>`:""}\n                    </div>\n                    <span class="other-side-score"> \x3c!-- this block is for horizontal alignment between two sides' scores --\x3e\n                        <span class="main-score">${e?.score[i].main_score}</span>\n                        ${"number"==typeof e?.score[i].tie_break?`<span class="tie-break">${e?.score[i].tie_break}</span>`:""}\n                    </span>\n                </div>`})).join("")}\n        </div>`),t.subscore&&(i+=`<div class="side-info-item subscore">${t.subscore}</div>`),e?.is_serving?i+='<div class="side-info-item serving-mark transparent"></div>':t.is_serving&&(i+='<div class="side-info-item serving-mark"></div>'),i):""},S=(t,e,n)=>`<div class="side-wrapper\n            ${void 0===t||void 0===n.contestants[t?.contestant_id]?"empty-side":""}\n            ${e?.is_winner?"looser":""}\n            ${t?.is_winner?"winner":""}\n        "\n        ${t?` contestant-id="${t.contestant_id}"`:""}\n    >\n        ${t?k(t,e,n):""}\n    </div>`,L=(t,e)=>{if(void 0===t)return`<div class="match-wrapper missing-match-placeholder">\n            ${S(null,null,e)}\n            ${S(null,null,e)}\n            <div class="match-lines-area">\n                <div class="line-wrapper upper"></div>\n                <div class="line-wrapper lower"></div>\n            </div>\n        </div>`;let n="";return!t.sides.find((t=>Array.isArray(t.score)&&t.score.length))&&t.match_status&&(n=`<div class="match-status">${t.match_status}</div>`),`<div class="match-wrapper ${t.is_live?"live":""}" match-id="${t.match_id}">\n        <div class="match-body">\n            <div class="sides">\n                ${S(t.sides[0],t.sides[1],e)}\n                ${S(t.sides[1],t.sides[0],e)}\n            </div>\n            ${n}\n        </div>\n        <div class="match-lines-area">\n            <div class="line-wrapper upper"></div>\n            <div class="line-wrapper lower"></div>\n        </div>\n    </div>`},M=(t,e)=>{const n=[];t.rounds.forEach(((e,i)=>{n.push(((t,e,n)=>{const i=Math.pow(2,t.rounds.length-1-n),a=r(`\n        <div class="round-wrapper" round-id="${e}">\n            ${(o=i,s=(n,i)=>L(t.matches.find((t=>t.round_id===e&&t.order===i)),t),Array.from(Array(o)).map(s)).join("")}\n            \n            ${0===n?'<div class="round-fake-padding left"></div>':""}\n            ${n===t.rounds.length-1?'<div class="round-fake-padding right"></div>':""}\n\n        </div>\n    `);var o,s;return(t=>{t.querySelectorAll("img.player-flag").forEach((t=>{t.addEventListener("error",$),t.addEventListener("load",x)}))})(a),a})(t,e.id,i))})),e.matches_positioner.append(...n)},T=(t,e,n,i)=>{var a,o;(t=>{const e=b();Object.entries(t).forEach((([t,n])=>{e[t]||console.warn(`Unknown option provided: %c${t}`,"background: pink; font-weight: bold")}))})(t),e.update_user_options(t),i.the_root_element.querySelectorAll(".navigation-button.left").forEach((t=>t.innerHTML=e.get_final_value("leftNavigationButtonHTML"))),i.the_root_element.querySelectorAll(".navigation-button.right").forEach((t=>t.innerHTML=e.get_final_value("rightNavigationButtonHTML"))),i.scrollbar.style.display=e.get_final_value("showScrollbar")?"block":"none",a=n.root_id,o=e.get_final_value,s(a,"general-styles",((t,e)=>`\n\n    #${t}.root-brackets-element {\n        background-color: ${e("rootBackgroundColor")};\n        overflow: hidden;\n        position: relative;\n        width: 100%;\n        min-width: 300px;\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n        text-align: left;\n        border: 1px solid ${e("mainBorderColor")};\n    }\n    \n    #${t} .all-but-buttons-header {\n        flex: 1;\n        display: flex;\n        height: 100%;\n    }\n\n    /* protection against external styles */\n    #${t}, #${t} * {\n        box-sizing: border-box;\n        user-select: none;\n        margin: 0;\n        padding: 0;\n        width: auto;\n        height: auto;\n        border: none;\n        border-radius: 0;\n        align-content: unset;\n        align-items: unset;\n        align-self: unset;\n        bottom: unset;\n        top: unset;\n        left: unset;\n        right: unset;\n        box-shadow: none;\n        outline: none;\n        text-decoration: none;\n        white-space: initial;\n        line-height: initial;\n    }\n\n    #${t} .zero-width {\n        width: 0;\n    }\n\n    #${t} .with-hidden-scrollbar {\n        scrollbar-width: none; /* For Firefox */\n        -ms-overflow-style: none; /* For Internet Explorer and Edge */\n    }\n\n    #${t} .with-hidden-scrollbar::-webkit-scrollbar {\n        width: 0px; /* For Chrome, Safari, and Opera */\n    }\n\n    #${t} .full-width-grid-column { /* (a column that takes full width of the parent grid el) */\n        grid-column: 1 / -1;\n    }\n\n    #${t} .equal-width-columns-grid { /* all columns acquire the width of the widest column */\n        display: grid;\n        grid-auto-flow: column;\n        grid-auto-columns: minmax(0, 1fr);\n    }\n\n    \n    \n    #${t} .round-titles-wrapper {\n        width: 100%;\n        display: grid;\n        height: ${e("roundTitlesHeight")}px;\n        font-size: ${e("roundTitlesFontSize")}px;\n        font-family: ${e("roundTitlesFontFamily")||e("rootFontFamily")};\n        color: ${e("roundTitleColor")};\n        border-bottom: 1px solid ${e("roundTitlesBorderBottomColor")};\n        padding-right: 1000px; /* otherwise the border-bottom stopped too early */\n        box-sizing: content-box;\n    }\n\n    #${t} .round-title {\n        display: flex;\n        align-items: center;\n        white-space: nowrap;\n        overflow: hidden;\n        justify-content: center;\n    }\n    #${t} .round-title.hidden {\n        display: none;\n    }\n\n    #${t} .matches-vertical-scroller {\n        flex: 1;\n        position: relative;\n        overflow-y: scroll;\n        overflow-x: hidden;\n    }\n\n    #${t} .matches-positioner {\n        position: relative;\n        display: grid;\n        grid-template-rows: 100%;\n        overflow: hidden;\n        min-height: calc(100% - ${2*e("mainVerticalPadding")}px);\n        margin-top: ${e("mainVerticalPadding")||0}px;\n        margin-bottom: ${e("mainVerticalPadding")||0}px;\n        font-size: ${e("matchFontSize")}px;\n        width: 100%;\n    }\n\n    #${t} .content-area {\n        height: 100%;\n        display: flex;\n        flex: 1;\n        flex-direction: column;\n        min-width: 0; /* to make it shrink to the free width of the parent */\n        overflow: hidden;\n        position: relative;\n    }\n\n    #${t} .scrollbar {\n        position: absolute;\n        z-index: 2;\n        right: 0;\n        width: ${e("scrollbarWidth")}px;\n        background: ${e("scrollbarColor")};\n        opacity: 0.7;\n    }\n    #${t} .scrollbar:hover, #${t} .scrollbar.dragged {\n        opacity: 1;\n    }\n\n\n\n\n\n\n\n/*  layout to measure rounds' natural width (where they aren't constrained by 100% and flex and grid stuff) */\n    #${t}.root-brackets-element.free-layout .round-wrapper.hidden {\n        display: grid; /* (instead of 'none') */\n    }    \n    #${t}.root-brackets-element.free-layout .matches-positioner {\n        width: max-content;\n    }\n`)(a,o)),s(a,"buttons-styles",((t,e)=>{const n="gutters"===e("navButtonsPosition"),i="beforeTitles"===e("navButtonsPosition"),a="overTitles"===e("navButtonsPosition"),o="hidden"===e("navButtonsPosition");return`\n\n\n        #${t} .buttons-header {\n            display: ${i||a?"flex":"none"};\n            align-items: center;\n            justify-content: space-between;\n            border-bottom: 1px solid ${e("navigationGutterBorderColor")};\n            ${a?`\n                    position: absolute;\n                    z-index: 1;\n                    left: 0;\n                    right: 0;\n                    height: ${parseInt(e("roundTitlesHeight"))+1}px;\n                `:""}\n        }\n\n        #${t} .buttons-header .navigation-button {\n            display: flex;\n            align-items: center;\n        }\n\n        #${t} .navigation-button {\n            max-height: 100%;\n        }\n\n        #${t} .navigation-button.non-header-button {\n            cursor: auto;\n            user-select: none;\n            z-index: 2;\n            display: ${o||i||a?"none":"flex"};\n            position: ${n?"static":"absolute"};\n            top: ${e("navigationButtonsTopDistance")};\n            transform: ${n?"none":"translate(0, -50%)"};\n            min-height: ${n?"100%":"0"}px;\n        }\n\n\n        #${t} .navigation-button.non-header-button {\n            justify-content: center;\n            align-items: center;\n        }\n        #${t} .navigation-button.non-header-button.left {\n            left: 0;\n            background: ${e("leftNavigationButtonBackground")};\n            border-right: ${n?`1px solid ${e("navigationGutterBorderColor")}`:"none"};\n        }\n        #${t} .navigation-button.non-header-button.right {\n            right: 0;\n            background: ${e("rightNavigationButtonBackground")};\n            border-left: ${n?`1px solid ${e("navigationGutterBorderColor")}`:"none"};\n        }\n        #${t} .navigation-button svg {\n            fill: ${e("navigationSvgColor")};\n        }\n           \n        #${t} .navigation-button.hidden {\n            visibility: hidden;\n        }\n\n        #${t} .navigation-button.active {\n            cursor: pointer;\n        }\n\n        #${t} .navigation-button > * {\n            transition: opacity ease-in-out 0.2s;\n            opacity: 0.15;\n            pointer-events: none;\n        }\n\n        #${t} .navigation-button.active > * {\n            opacity: 0.65;\n        }\n\n        #${t} .navigation-button.active:hover > * {\n            opacity: 1;\n        }\n\n        #${t} .default-navigation-svg {\n            height: auto;\n            padding: ${e("defaultNavigationSvgSize")/6}px ${e("defaultNavigationSvgSize")/8}px;\n            width: ${e("defaultNavigationSvgSize")}px;\n        }\n    `})(a,o)),s(a,"rounds-styles",((t,e)=>`\n    #${t} {\n        font-family: ${e("rootFontFamily")};\n    }\n\n    #${t} .round-wrapper {\n        position: relative;\n        display: grid;\n        grid-auto-rows: minmax(0, 1fr);\n        align-items: stretch;\n        min-width: 100px;\n        max-width: 100%;\n    }\n\n    #${t} .round-wrapper.hidden {\n        display: none;\n    }\n\n\n\n\n    #${t} .round-fake-padding {\n        position: absolute;\n        z-index: 2;\n        top: 0;\n        bottom: 0;\n        width: ${e("matchHorMargin")}px;\n        background: ${e("rootBackgroundColor")};\n    }\n    #${t} .round-fake-padding.left {\n        left: 0;\n    }\n    #${t} .round-fake-padding.right {\n        right: 0;\n    }\n\n\n\n\n\n    #${t} .match-wrapper {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 100%;\n        position: relative;\n        min-height: 40px;\n        padding-top: ${e("matchMinVerticalGap")/2}px;\n        padding-bottom: ${e("matchMinVerticalGap")/2}px;\n        padding-left: ${e("matchHorMargin")}px;\n        padding-right: ${e("matchHorMargin")}px;\n        box-sizing: border-box;\n    }\n    \n\n\n    #${t} .round-wrapper .match-body {\n        width: 100%;\n        transition: background-color 0.1s ease-out;\n        display: flex;\n        max-width: ${e("matchMaxWidth")}px;\n    }\n\n    #${t} .match-body .sides {\n        flex: 1;\n        display: grid;\n        grid-template-rows: minmax(0, 1fr) minmax(0, 1fr); /* two sides will always be of same height */\n        grid-template-columns: minmax(0, 1fr);\n        border: ${e("connectionLinesWidth")}px solid transparent;\n    }\n\n    #${t} .match-body .match-status {\n        font-size: ${Math.floor(.85*e("matchFontSize"))}px;\n        background: ${e("rootBackgroundColor")};\n        z-index: 2;\n        border: ${e("connectionLinesWidth")}px solid ${e("connectionLinesColor")};\n        padding: 2px 6px;\n        align-self: center;\n        margin-right: 2%;\n    }\n\n    #${t} .match-wrapper.highlighted .match-body .match-status {\n        border-color: ${e("highlightedConnectionLinesColor")};\n    }\n\n    ${e("onMatchClick")?`\n            #${t} .match-body {\n                cursor: pointer;\n            }\n            #${t} .match-body * {\n                pointer-events: none; /* handle click/hover only on whole body */\n            }\n            #${t} .match-body:hover {\n                background-color: rgb(250, 250, 250);\n            }\n            #${t} .match-body:hover .player-title {\n                color: ${e("highlightedPlayerTitleColor")};\n            }\n        `:""}\n\n\n\n\n    #${t} .match-wrapper.missing-match-placeholder {\n        pointer-events: none;\n    }\n\n\n\n\n\n\n\n\n\n\n\n\n\n    \n    \n/* LINES */\n\n/* regular lines */\n    #${t} .match-wrapper .match-lines-area {\n        position: absolute;\n        left: 0;\n        right: 0;\n        top: 0;\n        bottom: 0;\n        display: flex;\n        flex-direction: column;\n        pointer-events: none;\n        z-index: 1;\n    }\n    #${t} .match-wrapper .match-lines-area .line-wrapper {\n        flex: 1; /* each of 2 empty guys takes 50% height */\n        color: ${e("connectionLinesColor")}; /* for box-shadow color, not text */\n        transition: color 0.1s ease-out, border-color 0.1s ease-out;\n    }\n\n\n    #${t} .match-wrapper.highlighted .match-lines-area .line-wrapper {\n        color: ${e("highlightedConnectionLinesColor")}; /* for box-shadow color, not text */\n    }\n\n    #${t} .match-wrapper:nth-child(even) .line-wrapper.upper {\n        box-shadow: ${e("connectionLinesWidth")}px 0px 0px 0px;\n        border-bottom: ${e("connectionLinesWidth")}px solid ${e("connectionLinesColor")};\n    }\n    #${t} .match-wrapper:nth-child(odd) .line-wrapper.lower {\n        box-shadow: ${e("connectionLinesWidth")}px 0px 0px 0px;\n        border-top: ${e("connectionLinesWidth")}px solid ${e("connectionLinesColor")};\n    }\n    #${t} .round-wrapper:last-of-type .line-wrapper {\n        box-shadow: none !important;\n    }\n/* highlighted lines */\n    #${t} .match-wrapper.highlighted .line-wrapper {\n        border-color: ${e("highlightedConnectionLinesColor")} !important;\n    }\n    #${t} .match-wrapper.last-highlighted .line-wrapper {\n        color: ${e("connectionLinesColor")} !important;\n    }\n\n\n    #${t} .side-wrapper.highlighted .players-info,\n    #${t} .side-wrapper:hover .player-title {\n        color: ${e("highlightedPlayerTitleColor")};\n    }\n\n    #${t} .side-wrapper {\n        width: 100%;\n        display: flex;\n        align-items: center;\n        cursor: pointer;\n        padding-top: ${e("matchAxisMargin")}px;\n        padding-bottom: ${e("matchAxisMargin")}px;\n        padding-right: ${Math.floor(e("matchFontSize")/3*2)}px;\n        padding-left: ${Math.floor(e("matchFontSize")/2)}px;\n        color: ${e("matchTextColor")}; /* difined at this depth because on upper levels color property is used for box-shadow tricks */\n    }\n\n    #${t} .side-wrapper.empty-side {\n        pointer-events: none;\n    }\n\n    #${t} .side-wrapper:last-of-type {\n        margin-top: -${e("connectionLinesWidth")}px;\n        padding-top: ${e("matchAxisMargin")+e("connectionLinesWidth")}px;\n    }\n\n    #${t} .match-wrapper.live .match-body .sides {\n        border-color: ${e("liveMatchBorderColor")};\n        background-color: ${e("liveMatchBackgroundColor")};\n    }\n\n\n\n\n    #${t} .side-info-item {\n        display: grid;\n        grid-auto-rows: minmax(0, 1fr); /* equal height rows */\n        grid-template-columns: auto;\n        align-items: center;\n        pointer-events: none; /* to capture clicks on .side-wrapper */\n    }\n\n    #${t} .side-info-item.entry-status {\n        width: ${1.5*e("matchFontSize")}px;\n        font-size: ${e("matchFontSize")-4}px;\n        text-align: center;\n    }\n\n    #${t} .side-info-item.players-info {\n        grid-row-gap: ${e("oneSidePlayersGap")}px;\n        flex: 1;\n        padding-left: ${e("matchFontSize")/3*2}px;\n        min-width: 0;\n    }\n\n    #${t} .player-wrapper {\n        display: flex;\n        align-items: center;\n        min-width: 0;\n    }\n\n    #${t} .player-wrapper .nationality {\n        width: ${1.7*e("matchFontSize")}px;\n        font-size: ${e("matchFontSize")-4}px;\n        text-align: center;\n        margin-right: ${e("matchFontSize")/2}px;\n        display: flex;\n        justify-content: center;\n        flex-shrink: 0;\n    }\n\n    #${t} .player-wrapper .nationality > img {\n        max-height: ${e("matchFontSize")}px;\n    }\n\n    #${t} .player-wrapper .player-title {\n        flex: 1;\n        padding-right: ${1.5*e("matchFontSize")}px;\n        font-family: ${e("playerTitleFontFamily")||e("rootFontFamily")};\n        transition: color 0.1s ease-out, opacity 0.1s ease-out;\n        white-space: nowrap;\n        text-align: left;\n    }\n\n    #${t} .side-wrapper.looser:not(.highlighted) .player-title,\n    #${t} .side-wrapper .single-score:not(.winner) {\n        opacity: 0.54;\n    }\n    \n    #${t} .side-info-item.winner-mark {\n        padding-right: ${e("distanceBetweenScorePairs")}px;\n    }\n\n    #${t} .side-info-item.serving-mark {\n        border-radius: 50%;\n        background-color: #b7cf15;\n        width: ${e("matchFontSize")/2.5}px;\n        height: ${e("matchFontSize")/2.5}px;\n        margin-left: ${e("matchFontSize")/2}px;\n    }\n\n    #${t} .side-info-item.serving-mark.transparent {\n        background-color: transparent;\n    }\n\n    #${t} .side-info-item.score {\n        grid-auto-flow: column;\n        font-family: ${e("scoreFontFamily")||e("rootFontFamily")};\n        grid-column-gap: ${e("distanceBetweenScorePairs")}px;\n    }\n    #${t} .single-score {\n        display: flex;\n        overflow: visible;\n        flex-direction: column;\n        align-items: center;\n    }\n\n    #${t} .tie-break {\n        font-size: ${Math.floor(e("matchFontSize")/3*2)}px;\n        padding-left: 1px;\n        margin-top: -${Math.floor(e("matchFontSize")/5)}px;\n        margin-right: -${Math.floor(e("matchFontSize")/5)}px;\n    }\n\n    #${t} .single-score .side-own-score {\n        display: flex;\n    }\n\n    #${t} .single-score .other-side-score {\n        display: flex;\n        height: 1px;\n        overflow: hidden;\n    }\n\n    #${t} .side-info-item.subscore {\n        min-width: ${2*e("matchFontSize")}px;\n        text-align: center;\n        border: 1px solid ${e("matchTextColor")};\n        padding: 0 ${e("matchFontSize")/4}px;\n        margin-left: ${e("matchFontSize")/2}px;\n    }\n\n    #${t} .match-wrapper.live .side-info-item.subscore {\n        border-color: #c4c4c4;\n    }\n\n    #${t} svg.default-winner-svg {\n        height: ${e("matchFontSize")}px;\n        width: auto;\n    }\n`)(a,o)),s(a,"mobile-styles",(t=>`\n    #${t}.mobile .round-wrapper .match-wrapper {\n        padding-left: 1.5%;\n        padding-right: 1.5%;\n    }\n\n    #${t}.mobile .round-fake-padding {\n        display: none;\n    }\n\n    #${t}.mobile .match-body .sides {\n        width: 100%;\n    }\n\n`)(a))},C=(t,e)=>{const n=l(t),{have_critical_error:a}=i((t=>{const e=[];Array.isArray(t.rounds)||e.push({is_critical:!0,message:"Expected an array of rounds, instead got: ",data:t.rounds}),t.rounds&&t.rounds.length&&t.rounds.forEach((t=>{o(t)||e.push({is_critical:!0,message:"Round must be an object, instead got: ",data:t}),void 0===t.id?e.push({is_critical:!0,message:"Round must have an id: ",data:t}):"string"!=typeof t.id&&e.push({is_critical:!0,message:"Round id must be a string: ",data:t}),void 0===t.name?e.push({is_critical:!1,message:"Please provide a name for a round: ",data:t}):"string"!=typeof t.name&&e.push({is_critical:!1,message:"round.name must be a string: ",data:t})}));const n=d(t.matches,t.contestants);return e.push(...n),o(t.contestants)||e.push({is_critical:!1,message:"data.contestants must be an object which maps ids to contestants, instead got: ",data:t.contestants}),Object.values(t.contestants).forEach((t=>{o(t)||e.push({is_critical:!0,message:"Contestant must be an object, instead got: ",data:t}),void 0!==t.entry_status&&"string"!=typeof t.entry_status&&e.push({is_critical:!1,message:"If entry_status is provided for a contestant, it must be a string: ",data:t}),Array.isArray(t.players)?0===t.players.length?e.push({is_critical:!1,message:"contestant.players must contain at least one element: ",data:t}):t.players.forEach((t=>{o(t)||e.push({is_critical:!1,message:"Player should be an object, instead got: ",data:t}),"string"!=typeof t.title&&e.push({is_critical:!1,message:"Player must have a title, and it must be a string, instead got: ",data:t}),void 0!==t.nationality_code&&"string"!=typeof t.nationality_code&&e.push({is_critical:!1,message:"If nationality_code is provided for a player, it must be a string: ",data:t}),void 0!==t.flag_url&&"string"!=typeof t.flag_url&&e.push({is_critical:!1,message:"If flag_url is provided for a player, it must be a string: ",data:t})})):e.push({is_critical:!0,message:"Array of players must be provided for a contestant: ",data:t})})),e})(n));return!a&&(Object.assign(e,(t=>{let e=!1,n=!1;return t.matches.forEach((i=>i.sides.forEach((i=>{"string"==typeof t.contestants[i.contestant_id]?.entry_status&&(e=!0),t.contestants[i.contestant_id]?.players.forEach((t=>{"string"!=typeof t.flag_url&&"string"!=typeof t.nationality_code||(n=!0)}))})))),{...t,have_entry_statuses:e,have_nationalities:n,rounds:t.rounds.map(((e,n)=>({...e,title:e.name||c(t.rounds.length,n)})))}})(n)),!0)},B=(t,e,n)=>{const s=(()=>{let t={};const e=b();return{update_user_options:e=>{t={...t,...l(e)}},get_final_value:n=>((t,e,n)=>{const i=n[t];if(!i)return void console.warn("options.get_final_value called with a non-existent option name: ",t);let a=i.default_value;const r=e[t];if(void 0!==r)switch(i.type){case"number":"number"==typeof r?a=r:_(t,r);break;case"pixels":"number"==typeof r?(a=r,"number"==typeof i.min_value&&(a=Math.max(a,i.min_value))):_(t,r);break;case"multiline_string":case"string":"string"==typeof r?a=r:_(t,r);break;case"function_or_null":"function"==typeof r||null===r?a=r:_(t,r);break;case"boolean":"boolean"==typeof r?a=r:"false"===r?a=!1:"true"===r?a=!0:_(t,r);break;case"select":i.options.find((t=>o(t)?t.value===r:t===r))?a=r:_(t,r)}return a})(n,t,e),get_user_options:()=>t}})(),c={root_id:"id"+Math.random().toString(16).slice(2)};if(!(C(t,c)&&(p=e,p instanceof Element&&p.closest("html"))))return{moveToPreviousRound:()=>{},moveToNextRound:()=>{},getNavigationState:()=>{},applyNewOptions:()=>{},applyMatchesUpdates:()=>{}};var p;const u=((t,e)=>{t.innerHTML="";const n=`\n        <div class="content-area">\n            <div class="round-titles-wrapper  equal-width-columns-grid">\n        ${e.rounds.map(((t,e)=>`<div class="round-title">${t.name||`Round ${e+1}`}</div>`)).join("")}\n    </div>\n            <div class="matches-vertical-scroller with-hidden-scrollbar">\n        <div class="matches-positioner equal-width-columns-grid"></div>\n    </div>\n            <div class="scrollbar"></div>\n        </div>\n    `,i=r(`\n        <div class="root-brackets-element" id=${e.root_id}>\n            <div class="buttons-header">\n                <div class="navigation-button left"></div>\n                <div class="navigation-button right"></div>\n            </div>\n            <div class="all-but-buttons-header">\n                <div class="navigation-button non-header-button left"></div>\n                ${n}\n                <div class="navigation-button non-header-button right"></div>\n            </div>\n        </div>\n    `);return t.append(i),h(e.root_id)})(e,c);if(T(n,s,c,u),M(c,u),null===u.matches_positioner.firstElementChild)return;const m=((t,e)=>{const n=h(t);let i=0,a=n.matches_positioner.firstElementChild.clientWidth;const o=()=>((t,e,n,i)=>{const a=[...e.matches_positioner.querySelectorAll(".round-wrapper")],o=[...e.round_titles_wrapper.children],r=i("visibleRoundsCount")||Math.max(1,Math.floor(e.content_area.clientWidth/t));let s=0;s=(e.matches_vertical_scroller.scrollTop+e.matches_vertical_scroller.clientHeight/2)/e.matches_vertical_scroller.scrollHeight,a.forEach(((t,e)=>{const i=e>=n&&e<=n+r-1;t.classList[i?"remove":"add"]("hidden"),o[e].classList[i?"remove":"add"]("hidden")})),e.the_root_element.classList[1===r?"add":"remove"]("mobile");const l=e.matches_vertical_scroller.scrollHeight*s;var d,c;e.matches_vertical_scroller.scrollTop=(d=l-e.matches_vertical_scroller.clientHeight/2,c=e.matches_vertical_scroller.scrollHeight-e.matches_vertical_scroller.clientHeight,Math.max(Math.min(d,c),0)),((t,e)=>{let n=e>0,i=t.matches_positioner.lastChild.classList.contains("hidden");t.the_root_element.querySelectorAll(".navigation-button.left").forEach((t=>t.classList[n?"add":"remove"]("active"))),t.the_root_element.querySelectorAll(".navigation-button.right").forEach((t=>t.classList[i?"add":"remove"]("active")))})(e,n),g(e)})(a,n,i,e),r=()=>{const t=n.the_root_element.classList.contains("mobile");n.the_root_element.classList.remove("mobile"),n.the_root_element.classList.add("free-layout"),a=n.matches_positioner.firstElementChild.clientWidth,n.the_root_element.classList.remove("free-layout"),t&&n.the_root_element.classList.add("mobile"),o()};r();const s=()=>{i=Math.max(0,i-1),o()},l=()=>{n.matches_positioner.lastChild.classList.contains("hidden")&&(i+=1,o())};return{move_left:s,move_right:l,set_base_round_index:t=>{i=t,o()},apply_options:r,repaint:o,handle_click:t=>{t.target.classList.contains("active")&&(t.target.classList.contains("left")&&s(),t.target.classList.contains("right")&&l())},get_state:()=>{const e=h(t);return{reachedRightEdge:!e.matches_positioner.lastChild?.classList.contains("hidden"),allRoundsAreVisible:null===e.matches_positioner.querySelector(".round-wrapper.hidden"),baseRoundIndex:i}}}})(c.root_id,s.get_final_value);return((t,e)=>{let n=!1;new ResizeObserver(a((()=>{n?e():n=!0}))).observe(t)})(e,m.repaint),v(c,s.get_final_value,u,m),{moveToPreviousRound:m.move_left,moveToNextRound:m.move_right,setBaseRoundIndex:m.set_base_round_index,getNavigationState:m.get_state,applyNewOptions:t=>{T(t,s,c,u),m.apply_options()},applyFullDataUpdate:t=>{if(!C(t,c))return void console.warn("Failed to apply new data");const e=u.matches_vertical_scroller.scrollTop;u.matches_positioner.innerHTML="",M(c,u),m.repaint(),u.matches_vertical_scroller.scrollTop=e},applyMatchesUpdates:t=>{const{have_errors:e}=i(d(t,c.contestants));e||t.forEach((t=>{const e=document.querySelector(`#${c.root_id} .round-wrapper[round-id="${t.round_id}"] .match-wrapper:nth-child(${t.order+1})`);if(!e)return;e.replaceWith(r(L(t,c)));const n=c.matches.findIndex((e=>e.match_id===t.match_id));-1===n?c.matches.push(t):c.matches[n]=t}))},getAllData:()=>l(c),getUserOptions:s.get_user_options}};exports.easyPlayoffs=e})();
//# sourceMappingURL=index.js.map