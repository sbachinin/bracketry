<!DOCTYPE html>
<style>
    html{visibility: hidden;opacity:0;}
    .playoffs-navbar {
        display: flex;
        width: 600px;
        max-width: calc(100vw - 51px);
        flex-wrap: wrap;
    }
    .playoffs-navbar > div {
        padding: 5px 7px;
        border: 1px solid #ccc;
        margin: 0 8px 10px;
        cursor: pointer;
    }
    .playoffs-navbar > div.selected {
        border-color: black;
        outline: 1px solid;
    }
</style>
<body>
    <script type="module">
        import * as html_partials from './html_partials.mjs'
        import { insert_styles } from '../lib/utils/utils.mjs'
        import { examples_common_styles } from './examples_common_styles.mjs'
        import { createPlayoffs } from '../lib/lib.mjs'
        import { get_some_data } from '../test_data/get_some_data.mjs'
        import { add_options_manager } from '../options-manager/options-manager.mjs'
        import { escape_Html } from './escape_html.mjs'

        insert_styles('', 'common-styles', examples_common_styles)

        document.body.innerHTML = `


            ${html_partials.home_link}
            <h1>"EXTERNAL" NAVIGATION</h1>
            
            <div style="font-size: 18px;">
                <i>(In case you aren't happy with the built-in navigation behaviour)</i>
                <br />
                <br />
                <i>createPlayoffs()</i> returns some navigation-related methods which may be called from anywhere in your code:
                
                <div class="indent">
                    <br />
                    <i><b>moveToPreviousRound()</b></i>
                    <br />
                    (self-explanatory)

                    <br /><br />
                    <i><b>moveToNextRound()</b></i>
                    <br />
                    (self-explanatory)

                    <br /><br />
                    <i><b>moveToNRound(</b>roundIndex<b>)</b></i>
                    <br />
                    Make the nth round appear in the center
                    
                    <br /><br />
                    <i><b>getNavigationState()</b></i>
                    <br />
                    This one may help you decide if your buttons should be hidden or disabled in a particular situation.
                    <br />
                    It returns an object:
                    <br />
                    {
                    <div class="indent">
                        <i><b>reachedLeftEdge</b></i>, <span class="bleak_code">// Boolean. If true, then perhaps you should disable your left button </span>
                        <br />
                        <i><b>reachedRightEdge</b></i>, <span class="bleak_code">// Boolean. If true, then perhaps you should disable your right button </span>
                        <br />
                        <i><b>allRoundsAreVisible</b></i> <span class="bleak_code">// Boolean. If true, then perhaps you should hide your navigation stuff </span>
                        <br />
                        <i><b>centralRoundIndex</b></i> <span class="bleak_code">// Number. Which round is displayed in the center? </span>
                        <br />
                    </div>
                    }
                </div>
                
                
            </div>
            <br />
            <br />
            <hr />
            <br />
            <br />
            <h2>1. HOW: CREATE TOP NAVIGATION BAR</h2>
            Let's build a top navigation bar with a button for each round
            <br />
            I guess it will make more sense with a mobile layout. But it will work with a normal layout just as well.
            <div class="code" style="margin-top: 15px;">
import { createPlayoffs } from 'easy-playoffs'

const { <span class="highlighted_code">moveToNRound</span> } = createPlayoffs(
    your_data,
    your_playoffs_wrapper,
    <span class="bleak_code">// options  object:</span>
    {
        <span class="highlighted_code">navButtonsPosition: "hidden",
        useMobileLayout: true</span>
    }
)

<span class="bleak_code">// populate your nav element with buttons for each round;
// call moveToNRound with an index of a button that was clicked</span>
<span class="highlighted_code">your_data.rounds.forEach((r, r_i) => {
    const button = document.createElement('div')
    button.innerHTML = r.name
    button.addEventListener('click', (e) => {
        moveToNRound(r_i)
    })
    your_nav_element.append(button)
})
</span>
</div>

            <br />
            <h2 style="margin-bottom: 30px;">RESULT</h2>

            <div class="playoffs-navbar first"></div>
            <div class="common-playoffs-wrapper first" style="width: 600px; max-width: calc(100vw - 51px);"></div>
            <div class="options-manager-opener">manage options</div>


            <hr style="margin: 70px 0;" />
            <h2 style="margin-bottom: 5px">2. HOW: HIGHLIGHT BUTTONS OF A NAVIGATION BAR</h2>
            <i>(extension of first example)</i>
            <br />
            <br />
            Let's now highlight a navigation button which corresponds to a round currently displayed in the center
            <br /><br />
            You can manually keep track of the currently displayed round after any of the buttons were clicked;
            the question is which button to highlight <i>from the start</i> (before clicks).
            <br /><br />
            Easy-brackets in the beginning will try to navigate to the last 'contentful' round (last round which is finished or at least contains matches with known participants).
            <br /><br />
            So the initial 'central' round is a variable thing. To get its index use <i><b>centralRoundIndex</b></i> which is part of an object returned by <i><b>getNavigationState</b></i>









<div class="code" style="margin-top: 15px;">
import { createPlayoffs } from 'easy-playoffs'

const {
    moveToNRound,
    <span class="highlighted_code">getNavigationState</span>
} = createPlayoffs(
    your_data,
    your_playoffs_wrapper,
    {
        navButtonsPosition: "hidden",
        useMobileLayout: true
    }
)

const buttons = your_data.rounds.map((r, r_i) => {
    const button = document.createElement('div')
    button.innerHTML = r.name
    <span class="highlighted_code">if (getNavigationState().centralRoundIndex === r_i) {
        button.classList.add('selected')
    }</span>
    button.addEventListener('click', (e) => {
        <span class="highlighted_code">buttons.forEach(c => c.classList.remove('selected'))
        e.target.classList.add('selected')</span>
        moveToNRound(r_i)
    })
    your_nav_element.append(button)
    return button
})

</div>

            <br />
            <hr />
            <h2>RESULT</h2>

            <div class="playoffs-navbar second"></div>
            <div class="common-playoffs-wrapper second" style="width: 600px; max-width: calc(100vw - 51px);"></div>

            ${html_partials.footer}

        `

        
        get_some_data(3).then(data => {

            const options = {
                navButtonsPosition: 'hidden',
                useMobileLayout: true
            }

            const { applyNewOptions, moveToNRound } = createPlayoffs(
                data,
                document.querySelector('.common-playoffs-wrapper.first'),
                options
            )
            
            const buttons = data.rounds.map((r, r_i) => {
                const button = document.createElement('div')
                button.innerHTML = r.name
                button.addEventListener('click', (e) => {
                    moveToNRound(r_i)
                })
                document.querySelector('.playoffs-navbar.first').append(button)
                return button
            })

            add_options_manager(
                document.querySelector('.options-manager-opener'),
                applyNewOptions,
                options
            )
        })

        get_some_data(3).then(data => {

            const options = {
                navButtonsPosition: 'hidden',
                useMobileLayout: true
            }

            const { applyNewOptions, getNavigationState, moveToNRound } = createPlayoffs(
                data,
                document.querySelector('.common-playoffs-wrapper.second'),
                options
            )

            const buttons = data.rounds.map((r, r_i) => {
                const button = document.createElement('div')
                button.innerHTML = r.name
                if (getNavigationState().centralRoundIndex === r_i) {
                        button.classList.add('selected')
                    }
                
                button.addEventListener('click', (e) => {
                    buttons.forEach(c => c.classList.remove('selected'))
                    e.target.classList.add('selected')
                    moveToNRound(r_i)
                })
                document.querySelector('.playoffs-navbar.second').append(button)
                return button
            })
        })


    </script>

</body>