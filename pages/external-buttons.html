<!DOCTYPE html>
<!-- <link rel="stylesheet" href="styles.css"> -->
<style>
    html{visibility: hidden;opacity:0;}
    .playoffs-navbar {
        display: flex;
        width: 453px;
        max-width: calc(100vw - 51px);
        flex-wrap: wrap;
    }
    .playoffs-navbar > div {
        padding: 5px 7px;
        border: 1px solid #ccc;
        margin: 0 8px 10px;
        cursor: pointer;
    }
</style>
<body>
    <script type="module">
        import * as html_partials from './html_partials.mjs'
        import { insert_styles } from '../lib/utils/utils.mjs'
        import { examples_common_styles } from './examples_common_styles.mjs'
        import { createPlayoffs } from '../lib/lib.mjs'
        import { get_some_data } from '../test_data/get_some_data.mjs'
        import { create_options_sidebar } from '../options-inputs/options-inputs.mjs'
        import { escape_Html } from './escape_html.mjs'
        import { BUTTONS_POSITIONS } from '../lib/constants.mjs'

        insert_styles('', 'common-styles', examples_common_styles)

        document.body.innerHTML = `


            ${html_partials.home_link}
            <h1>"EXTERNAL" NAVIGATION</h1>
            
            <div style="font-size: 18px;">
                <i>(In case you aren't happy with the built-in navigation behaviour)</i>
                <br />
                <br />
                <i><b>createPlayoffs()</b></i> returns some navigation-related methods which may be called from anywhere in your code
                
                <br /><br />
                <i><b>moveToPreviousRound()</b></i>
                <br />
                (self-explanatory)

                <br /><br />
                <i><b>moveToNextRound()</b></i>
                <br />
                (self-explanatory)

                <br /><br />
                <i><b>moveToNRound(</b>roundIndex<b>)</b></i>
                <br />
                "scroll" to nth round so that it appears in the center
                
                <br /><br />
                <i><b>getNavigationState()</b></i>
                <br />
                This one may help you decide if your buttons should be hidden or disabled in a particular situation.
                <br />
                It returns an object of 3 boolean values:
                <br />
                {
                <br />
                    &nbsp;&nbsp;&nbsp;&nbsp; <i><b>reachedLeftEdge</b></i>, <span class="bleak_code">// if true, then perhaps you should disable your left button </span>
                <br />
                    &nbsp;&nbsp;&nbsp;&nbsp; <i><b>reachedRightEdge</b></i>, <span class="bleak_code">// if true, then perhaps you should disable your right button </span>
                <br />
                    &nbsp;&nbsp;&nbsp;&nbsp; <i><b>allRoundsAreVisible</b></i> <span class="bleak_code">// if true, then perhaps you should hide your navigation stuff </span>
                <br />
                }
                
            </div>
            
            <hr />
            <h2>HOW</h2>
            Let's build a top navigation bar with a button for each round
            <br />
            I guess it will make more sense with a mobile layout. But it will work with a normal layout just as well.
            <div class="code" style="margin-top: 15px;">import { createPlayoffs } from 'easy-playoffs'

const {
    <span class="highlighted_code">moveToNRound</span>
} = createPlayoffs(
    your_data,
    your_playoffs_wrapper,
    <span class="bleak_code">// options object:</span>
    <span class="highlighted_code">{
        nav_buttons_position: "${BUTTONS_POSITIONS.hidden}",
        use_mobile_layout: true
    }</span>
)

<span class="bleak_code">// populate your nav element with buttons for each round;
// call moveToNRound with an index of a button which was clicked</span><span class="highlighted_code">
your_data.rounds.forEach((r, r_i) => {
    const button = document.createElement('div')
    button.innerHTML = r.name
    button.addEventListener('click', (e) => {
        moveToNRound(r_i)
    })
    your_nav_element.append(button)
})
</span>
</div>

            <br />
            <hr />
            <h2>RESULT</h2>

            <div class="playoffs-navbar"></div>
            <div class="common-playoffs-wrapper" style="width: 453px; max-width: calc(100vw - 51px);"></div>

            

            ${html_partials.footer}

        `

        
        get_some_data(3).then(data => {

            const options = {
                nav_buttons_position: BUTTONS_POSITIONS.hidden,
                use_mobile_layout: true
            }

            const { applyNewOptions, moveToNRound } = createPlayoffs(
                data,
                document.querySelector('.common-playoffs-wrapper'),
                options
            )
            
            const nav = document.querySelector('.playoffs-navbar')
            data.rounds.forEach((r, r_i) => {
                const button = document.createElement('div')
                button.innerHTML = r.name
                button.addEventListener('click', (e) => {
                    moveToNRound(r_i)
                })
                nav.append(button)
            })

            create_options_sidebar(applyNewOptions, data, options)
        })

    </script>

</body>