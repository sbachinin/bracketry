<!DOCTYPE html>
<style>
    html{visibility: hidden;opacity:0;}
    .playoffs-navbar {
        display: flex;
        width: 600px;
        max-width: calc(100vw - 51px);
        flex-wrap: wrap;
    }

    .common-playoffs-wrapper {
        width: 550px;
    }

    .playoffs-navbar > div {
        padding: 5px 7px;
        border: 1px solid #ccc;
        margin: 0 8px 10px;
        cursor: pointer;
    }
    .playoffs-navbar > div.selected {
        border-color: black;
        outline: 1px solid;
    }
</style>
<body>
    <script type="module">
        import * as html_partials from './html_partials.mjs'
        import { insert_styles } from '../lib/utils/utils.mjs'
        import { examples_common_styles } from './examples_common_styles.mjs'
        import { createPlayoffs } from '../lib/lib.mjs'
        import { get_some_data } from '../test_data/get_some_data.mjs'
        import { add_options_manager } from '../options-manager/options-manager.mjs'
        import { escape_Html } from './escape_html.mjs'

        insert_styles('', 'common-styles', examples_common_styles)

        document.body.innerHTML = `


            ${html_partials.home_link}
            <div class="heading-2" style="margin-top: 30px;">"EXTERNAL" NAVIGATION</div>
            
            <div style="font-size: 18px;">
                <i>(In case you aren't happy with the built-in navigation behaviour)</i>
                <br />
                <br />
                <div class="note">The following stuff seems more relevant for narrow screens where only 1 round is displayed at a time</div>
                <br />
                <br />
                <i>createPlayoffs()</i> returns some navigation-related methods which may be called from anywhere in your code:
                
                <div class="indent">
                    <br />
                    <i><b>moveToPreviousRound()</b></i>
                    <br />
                    "Scroll" the visible area by one round width to the left

                    <br /><br />
                    <i><b>moveToNextRound()</b></i>
                    <br />
                    "Scroll" the visible area by one round width to the right

                    <br /><br />
                    <i><b id="sbri">setBaseRoundIndex(</b>roundIndex<b>)</b></i>
                    <br />
                    'Scroll' to a round with a given index
                    <br />
                    The "base" round is the leftmost visible one (or the only visible one).
                    <br />
                    Thus calling this method will make nth round appear on the left. (Its left edge tied to the left edge of the visible area).
                    <br />
                    The index you pass here is zero-based.
                    

                    <br /><br />
                    <i><b>getNavigationState()</b></i>
                    <br />
                    This one may help you decide if your buttons should be hidden or disabled.
                    <br />
                    It returns an object:
                    <br />
                    {
                    <div class="indent">
                        <i><b>reachedRightEdge</b></i>, <span class="bleak-code">// Boolean. May be used to disable your right button </span>
                        <br />
                        <i><b>allRoundsAreVisible</b></i> <span class="bleak-code">// Boolean. May be used to hide all navigation </span>
                        <br />
                        <i><b id="bri">baseRoundIndex</b></i> <span class="bleak-code">// Number. Which round is the leftmost visible one? </span>
                        <br />
                    </div>
                    }
                </div>
                
                
            </div>
            <br />
            <br />
            <hr />
            <br />
            <br />
            <div class="heading-3">1. CREATE TOP NAVIGATION BAR</div>
            <p>
                Let's build a top navigation bar with a button for each round
            </p>
            <div class="code" style="margin-top: 15px;">
import { createPlayoffs } from 'easy-playoffs'

const { <span class="highlighted-code">setBaseRoundIndex</span> } = createPlayoffs(
    your_data,
    your_playoffs_wrapper,
    {
        <span class="highlighted-code">navButtonsPosition: "hidden",
    }
)

<span class="bleak-code">// populate your nav element with buttons for each round;
// call setBaseRoundIndex with an index of a button that was clicked</span>
<span class="highlighted-code">your_data.rounds.forEach((r, r_i) => {
    const button = document.createElement('div')
    button.innerHTML = r.name
    button.addEventListener('click', (e) => {
        setBaseRoundIndex(r_i) <span class="bleak-code">
    })
    your_nav_element.append(button)
})
</span>
</div>

            <br />
            <h2 style="margin-bottom: 30px;">RESULT</h2>

            <div class="playoffs-navbar first"></div>
            <div class="common-playoffs-wrapper first"></div>
            <div class="options-manager-opener">manage options</div>
















            <hr style="margin: 70px 0;" />
            <div class="heading-3">2. HIGHLIGHT BUTTONS OF A NAVIGATION BAR</div>
            <p>
                Here is a small extension of first example.
                <br />
                Let's now highlight a navigation button which corresponds to a currently displayed round.
                <br />
                You can keep this 'current index' it in your own variable but (just in case) instead you can use <a href="#bri"><i><b>baseRoundIndex</b></i></a> returned by <b>getNavigationState</b>.
            </p>








<div class="code" style="margin-top: 15px;">
import { createPlayoffs } from 'easy-playoffs'

const {
    setBaseRoundIndex,
} = createPlayoffs(
    your_data,
    your_playoffs_wrapper,
    {
        navButtonsPosition: "hidden",
    }
)

const buttons = your_data.rounds.map((r, r_i) => {
    const button = document.createElement('div')
    button.innerHTML = r.name
    <span class="bleak-code">
    <span class="highlighted-code">if (r_i === 0) {
        button.classList.add('selected')
    }</span>
    button.addEventListener('click', (e) => {
        <span class="highlighted-code">buttons.forEach(c => c.classList.remove('selected'))
        e.target.classList.add('selected')</span>
        setBaseRoundIndex(r_i)
    })
    your_nav_element.append(button)
    return button
})

</div>

            <br />
            <hr />
            <h2>RESULT</h2>

            <div class="playoffs-navbar second"></div>
            <div class="common-playoffs-wrapper second"></div>










            <hr style="margin: 70px 0;" />
            <div class="heading-3">3. NAVIGATE TO NTH ROUND ON INITIALIZATION</div>
            <p>
                On initialization easy-playoffs by default shows the very first rounds of a tournament.
                <br />
                But you may want to start from the last "contentful" round for example. (E.g., final round of a finished tournament)
                <br />
                Call <a href="#sbri"><b>setBaseRoundIndex</b></a> with a desired index.
                <br />
                (Deducing this index from your data is your job.)
                <br />

            </p>

            <div class="code">
import { createPlayoffs } from 'easy-playoffs'

const { <span class="highlighted-code">setBaseRoundIndex</span> } = createPlayoffs(
    your_data,
    your_playoffs_wrapper,
    {}
)

<span class="highlighted-code">setBaseRoundIndex(5)</span>
            </div>

            <br />
            <div class="common-playoffs-wrapper third"></div>




            ${html_partials.footer}

        `

        
        get_some_data(3).then(data => {

            const options = {
                navButtonsPosition: 'hidden',
            }

            const { applyNewOptions, setBaseRoundIndex } = createPlayoffs(
                data,
                document.querySelector('.common-playoffs-wrapper.first'),
                options
            )
            
            const buttons = data.rounds.map((r, r_i) => {
                const button = document.createElement('div')
                button.innerHTML = r.name
                button.addEventListener('click', (e) => {
                    setBaseRoundIndex(r_i)
                })
                document.querySelector('.playoffs-navbar.first').append(button)
                return button
            })

            add_options_manager(
                document.querySelector('.options-manager-opener'),
                applyNewOptions,
                options
            )
        })









        get_some_data(3).then(data => {

            const options = {
                navButtonsPosition: 'hidden',
            }

            const { applyNewOptions, setBaseRoundIndex } = createPlayoffs(
                data,
                document.querySelector('.common-playoffs-wrapper.second'),
                options
            )

            const buttons = data.rounds.map((r, r_i) => {
                const button = document.createElement('div')
                button.innerHTML = r.name
                if (r_i === 0) {
                    button.classList.add('selected')
                }
                
                button.addEventListener('click', (e) => {
                    buttons.forEach(c => c.classList.remove('selected'))
                    e.target.classList.add('selected')
                    setBaseRoundIndex(r_i)
                })
                document.querySelector('.playoffs-navbar.second').append(button)
                return button
            })
        })








        get_some_data(3).then(data => {
            const { setBaseRoundIndex } = createPlayoffs(
                data,
                document.querySelector('.common-playoffs-wrapper.third'),
                {}
            )
            setBaseRoundIndex(5)
        })





    </script>

</body>
